<html>
<head>
  <title> HEXO GUI </title>
  <meta charset="utf-8"/>

  <link rel="stylesheet" href="index.css"/>
  <script src="bower_components/angular/angular.js" type="text/javascript"></script>
  <script src="bower_components/angular-route/angular-route.js"></script>
  <script src="bower_components/jquery/dist/jquery.js" type="text/javascript"></script>

</head>
<body ng-app="HexoGUIApp">
  <div ng-view></div>

<script>

var app = angular.module('HexoGUIApp', ['ngRoute']);

app.config(['$routeProvider',
  function($routeProvider) {
    $routeProvider.
    when('/', {
      templateUrl: 'partials/main.html',
      controller: 'MainCtrl'
    }).
    when('/config', {
      templateUrl: 'partials/config.html',
      controller: 'ConfigCtrl'
    }).
    otherwise({
      redirectTo: '/'
    });
  }]);

app.directive('ngnwdir', function() {
  return {
    scope: {
      'ngnwdir': '='
    },
    link: function(scope,element,attrs){
      $(element).change(function(evt){
        var val = $(this).val();
        scope.$apply(function(){
          scope.ngnwdir = val;
        });
      });
    }
  };
});

var config = {
  'dirpath': ''
};

app.controller('ConfigCtrl', function($scope, $location){
  $scope.submit = function(){
    config.dirpath = $scope.nnn;
    $location.path('/');
  };
});

app.controller('MainCtrl', function($scope){
  $scope.dirpath = config.dirpath;
  $scope.articles = [];
});

// Load native UI library
var gui = require('nw.gui');

// Create an empty menu
var menu = new gui.Menu();

</script>
</body>
</html>
